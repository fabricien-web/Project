{"ast":null,"code":"'use strict';\n\nvar extend = require('xtend');\n\nvar fuzzy = require('fuzzy');\n\nvar List = require('./list');\n\nvar Suggestions = function (el, data, options) {\n  options = options || {};\n  this.options = extend({\n    minLength: 2,\n    limit: 5,\n    filter: true\n  }, options);\n  this.el = el;\n  this.data = data || [];\n  this.list = new List(this);\n  this.query = '';\n  this.selected = null;\n  this.list.draw();\n  this.el.addEventListener('keyup', function (e) {\n    this.handleKeyUp(e.keyCode);\n  }.bind(this), false);\n  this.el.addEventListener('keydown', function (e) {\n    this.handleKeyDown(e);\n  }.bind(this));\n  this.el.addEventListener('focus', function () {\n    this.handleFocus();\n  }.bind(this));\n  this.el.addEventListener('blur', function () {\n    this.handleBlur();\n  }.bind(this));\n  this.el.addEventListener('paste', function (e) {\n    this.handlePaste(e);\n  }.bind(this));\n  return this;\n};\n\nSuggestions.prototype.handleKeyUp = function (keyCode) {\n  // 40 - DOWN\n  // 38 - UP\n  // 27 - ESC\n  // 13 - ENTER\n  // 9 - TAB\n  if (keyCode === 40 || keyCode === 38 || keyCode === 27 || keyCode === 13 || keyCode === 9) return;\n  this.handleInputChange(this.el.value);\n};\n\nSuggestions.prototype.handleKeyDown = function (e) {\n  switch (e.keyCode) {\n    case 13: // ENTER\n\n    case 9:\n      // TAB\n      e.preventDefault();\n\n      if (!this.list.isEmpty()) {\n        this.value(this.list.items[this.list.active].original);\n        this.list.hide();\n      }\n\n      break;\n\n    case 27:\n      // ESC\n      if (!this.list.isEmpty()) this.list.hide();\n      break;\n\n    case 38:\n      // UP\n      this.list.previous();\n      break;\n\n    case 40:\n      // DOWN\n      this.list.next();\n      break;\n  }\n};\n\nSuggestions.prototype.handleBlur = function () {\n  if (!this.list.selectingListItem) {\n    this.list.hide();\n  }\n};\n\nSuggestions.prototype.handlePaste = function (e) {\n  if (e.clipboardData) {\n    this.handleInputChange(e.clipboardData.getData('Text'));\n  } else {\n    var self = this;\n    setTimeout(function () {\n      self.handleInputChange(e.target.value);\n    }, 100);\n  }\n};\n\nSuggestions.prototype.handleInputChange = function (query) {\n  this.query = this.normalize(query);\n  this.list.clear();\n\n  if (this.query.length < this.options.minLength) {\n    this.list.draw();\n    return;\n  }\n\n  this.getCandidates(function (data) {\n    for (var i = 0; i < data.length; i++) {\n      this.list.add(data[i]);\n      if (i === this.options.limit - 1) break;\n    }\n\n    this.list.draw();\n  }.bind(this));\n};\n\nSuggestions.prototype.handleFocus = function () {\n  if (!this.list.isEmpty()) this.list.show();\n  this.list.selectingListItem = false;\n};\n/**\r\n * Update data previously passed\r\n *\r\n * @param {Array} revisedData\r\n */\n\n\nSuggestions.prototype.update = function (revisedData) {\n  this.data = revisedData;\n  this.handleKeyUp();\n};\n/**\r\n * Clears data\r\n */\n\n\nSuggestions.prototype.clear = function () {\n  this.data = [];\n  this.list.clear();\n};\n/**\r\n * Normalize the results list and input value for matching\r\n *\r\n * @param {String} value\r\n * @return {String}\r\n */\n\n\nSuggestions.prototype.normalize = function (value) {\n  value = value.toLowerCase();\n  return value;\n};\n/**\r\n * Evaluates whether an array item qualifies as a match with the current query\r\n *\r\n * @param {String} candidate a possible item from the array passed\r\n * @param {String} query the current query\r\n * @return {Boolean}\r\n */\n\n\nSuggestions.prototype.match = function (candidate, query) {\n  return candidate.indexOf(query) > -1;\n};\n\nSuggestions.prototype.value = function (value) {\n  this.selected = value;\n  this.el.value = this.getItemValue(value);\n\n  if (document.createEvent) {\n    var e = document.createEvent('HTMLEvents');\n    e.initEvent('change', true, false);\n    this.el.dispatchEvent(e);\n  } else {\n    this.el.fireEvent('onchange');\n  }\n};\n\nSuggestions.prototype.getCandidates = function (callback) {\n  var options = {\n    pre: '<strong>',\n    post: '</strong>',\n    extract: function (d) {\n      return this.getItemValue(d);\n    }.bind(this)\n  };\n  var results = this.options.filter ? fuzzy.filter(this.query, this.data, options) : this.data.map(function (d) {\n    var boldString = this.getItemValue(d);\n    var indexString = this.normalize(boldString);\n    var indexOfQuery = indexString.lastIndexOf(this.query);\n\n    while (indexOfQuery > -1) {\n      var endIndexOfQuery = indexOfQuery + this.query.length;\n      boldString = boldString.slice(0, indexOfQuery) + '<strong>' + boldString.slice(indexOfQuery, endIndexOfQuery) + '</strong>' + boldString.slice(endIndexOfQuery);\n      indexOfQuery = indexString.slice(0, indexOfQuery).lastIndexOf(this.query);\n    }\n\n    return {\n      original: d,\n      string: boldString\n    };\n  }.bind(this));\n  callback(results);\n};\n/**\r\n * For a given item in the data array, return what should be used as the candidate string\r\n *\r\n * @param {Object|String} item an item from the data array\r\n * @return {String} item\r\n */\n\n\nSuggestions.prototype.getItemValue = function (item) {\n  return item;\n};\n\nmodule.exports = Suggestions;","map":{"version":3,"sources":["C:/Users/Fabricien/Documents/Projet/fabTravel/client/node_modules/suggestions/src/suggestions.js"],"names":["extend","require","fuzzy","List","Suggestions","el","data","options","minLength","limit","filter","list","query","selected","draw","addEventListener","e","handleKeyUp","keyCode","bind","handleKeyDown","handleFocus","handleBlur","handlePaste","prototype","handleInputChange","value","preventDefault","isEmpty","items","active","original","hide","previous","next","selectingListItem","clipboardData","getData","self","setTimeout","target","normalize","clear","length","getCandidates","i","add","show","update","revisedData","toLowerCase","match","candidate","indexOf","getItemValue","document","createEvent","initEvent","dispatchEvent","fireEvent","callback","pre","post","extract","d","results","map","boldString","indexString","indexOfQuery","lastIndexOf","endIndexOfQuery","slice","string","item","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,MAAM,GAAGC,OAAO,CAAC,OAAD,CAApB;;AACA,IAAIC,KAAK,GAAGD,OAAO,CAAC,OAAD,CAAnB;;AACA,IAAIE,IAAI,GAAGF,OAAO,CAAC,QAAD,CAAlB;;AAEA,IAAIG,WAAW,GAAG,UAASC,EAAT,EAAaC,IAAb,EAAmBC,OAAnB,EAA4B;AAC5CA,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,OAAKA,OAAL,GAAeP,MAAM,CAAC;AACpBQ,IAAAA,SAAS,EAAE,CADS;AAEpBC,IAAAA,KAAK,EAAE,CAFa;AAGpBC,IAAAA,MAAM,EAAE;AAHY,GAAD,EAIlBH,OAJkB,CAArB;AAMA,OAAKF,EAAL,GAAUA,EAAV;AACA,OAAKC,IAAL,GAAYA,IAAI,IAAI,EAApB;AACA,OAAKK,IAAL,GAAY,IAAIR,IAAJ,CAAS,IAAT,CAAZ;AAEA,OAAKS,KAAL,GAAa,EAAb;AACA,OAAKC,QAAL,GAAgB,IAAhB;AAEA,OAAKF,IAAL,CAAUG,IAAV;AAEA,OAAKT,EAAL,CAAQU,gBAAR,CAAyB,OAAzB,EAAkC,UAASC,CAAT,EAAY;AAC5C,SAAKC,WAAL,CAAiBD,CAAC,CAACE,OAAnB;AACD,GAFiC,CAEhCC,IAFgC,CAE3B,IAF2B,CAAlC,EAEc,KAFd;AAIA,OAAKd,EAAL,CAAQU,gBAAR,CAAyB,SAAzB,EAAoC,UAASC,CAAT,EAAY;AAC9C,SAAKI,aAAL,CAAmBJ,CAAnB;AACD,GAFmC,CAElCG,IAFkC,CAE7B,IAF6B,CAApC;AAIA,OAAKd,EAAL,CAAQU,gBAAR,CAAyB,OAAzB,EAAkC,YAAW;AAC3C,SAAKM,WAAL;AACD,GAFiC,CAEhCF,IAFgC,CAE3B,IAF2B,CAAlC;AAIA,OAAKd,EAAL,CAAQU,gBAAR,CAAyB,MAAzB,EAAiC,YAAW;AAC1C,SAAKO,UAAL;AACD,GAFgC,CAE/BH,IAF+B,CAE1B,IAF0B,CAAjC;AAIA,OAAKd,EAAL,CAAQU,gBAAR,CAAyB,OAAzB,EAAkC,UAASC,CAAT,EAAY;AAC5C,SAAKO,WAAL,CAAiBP,CAAjB;AACD,GAFiC,CAEhCG,IAFgC,CAE3B,IAF2B,CAAlC;AAIA,SAAO,IAAP;AACD,CAvCD;;AAyCAf,WAAW,CAACoB,SAAZ,CAAsBP,WAAtB,GAAoC,UAASC,OAAT,EAAkB;AACpD;AACA;AACA;AACA;AACA;AAEA,MAAIA,OAAO,KAAK,EAAZ,IACAA,OAAO,KAAK,EADZ,IAEAA,OAAO,KAAK,EAFZ,IAGAA,OAAO,KAAK,EAHZ,IAIAA,OAAO,KAAK,CAJhB,EAImB;AAEnB,OAAKO,iBAAL,CAAuB,KAAKpB,EAAL,CAAQqB,KAA/B;AACD,CAdD;;AAgBAtB,WAAW,CAACoB,SAAZ,CAAsBJ,aAAtB,GAAsC,UAASJ,CAAT,EAAY;AAChD,UAAQA,CAAC,CAACE,OAAV;AACE,SAAK,EAAL,CADF,CACW;;AACT,SAAK,CAAL;AAAS;AACPF,MAAAA,CAAC,CAACW,cAAF;;AACA,UAAI,CAAC,KAAKhB,IAAL,CAAUiB,OAAV,EAAL,EAA0B;AACxB,aAAKF,KAAL,CAAW,KAAKf,IAAL,CAAUkB,KAAV,CAAgB,KAAKlB,IAAL,CAAUmB,MAA1B,EAAkCC,QAA7C;AACA,aAAKpB,IAAL,CAAUqB,IAAV;AACD;;AACH;;AACA,SAAK,EAAL;AAAS;AACP,UAAI,CAAC,KAAKrB,IAAL,CAAUiB,OAAV,EAAL,EAA0B,KAAKjB,IAAL,CAAUqB,IAAV;AAC5B;;AACA,SAAK,EAAL;AAAS;AACP,WAAKrB,IAAL,CAAUsB,QAAV;AACF;;AACA,SAAK,EAAL;AAAS;AACP,WAAKtB,IAAL,CAAUuB,IAAV;AACF;AAjBF;AAmBD,CApBD;;AAsBA9B,WAAW,CAACoB,SAAZ,CAAsBF,UAAtB,GAAmC,YAAW;AAC5C,MAAI,CAAC,KAAKX,IAAL,CAAUwB,iBAAf,EAAkC;AAChC,SAAKxB,IAAL,CAAUqB,IAAV;AACD;AACF,CAJD;;AAMA5B,WAAW,CAACoB,SAAZ,CAAsBD,WAAtB,GAAoC,UAASP,CAAT,EAAY;AAC9C,MAAIA,CAAC,CAACoB,aAAN,EAAqB;AACnB,SAAKX,iBAAL,CAAuBT,CAAC,CAACoB,aAAF,CAAgBC,OAAhB,CAAwB,MAAxB,CAAvB;AACD,GAFD,MAEO;AACL,QAAIC,IAAI,GAAG,IAAX;AACAC,IAAAA,UAAU,CAAC,YAAY;AACrBD,MAAAA,IAAI,CAACb,iBAAL,CAAuBT,CAAC,CAACwB,MAAF,CAASd,KAAhC;AACD,KAFS,EAEP,GAFO,CAAV;AAGD;AACF,CATD;;AAWAtB,WAAW,CAACoB,SAAZ,CAAsBC,iBAAtB,GAA0C,UAASb,KAAT,EAAgB;AACxD,OAAKA,KAAL,GAAa,KAAK6B,SAAL,CAAe7B,KAAf,CAAb;AAEA,OAAKD,IAAL,CAAU+B,KAAV;;AAEA,MAAI,KAAK9B,KAAL,CAAW+B,MAAX,GAAoB,KAAKpC,OAAL,CAAaC,SAArC,EAAgD;AAC9C,SAAKG,IAAL,CAAUG,IAAV;AACA;AACD;;AAED,OAAK8B,aAAL,CAAmB,UAAStC,IAAT,EAAe;AAChC,SAAK,IAAIuC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGvC,IAAI,CAACqC,MAAzB,EAAiCE,CAAC,EAAlC,EAAsC;AACpC,WAAKlC,IAAL,CAAUmC,GAAV,CAAcxC,IAAI,CAACuC,CAAD,CAAlB;AACA,UAAIA,CAAC,KAAM,KAAKtC,OAAL,CAAaE,KAAb,GAAqB,CAAhC,EAAoC;AACrC;;AACD,SAAKE,IAAL,CAAUG,IAAV;AACD,GANkB,CAMjBK,IANiB,CAMZ,IANY,CAAnB;AAOD,CAjBD;;AAmBAf,WAAW,CAACoB,SAAZ,CAAsBH,WAAtB,GAAoC,YAAW;AAC7C,MAAI,CAAC,KAAKV,IAAL,CAAUiB,OAAV,EAAL,EAA0B,KAAKjB,IAAL,CAAUoC,IAAV;AAC1B,OAAKpC,IAAL,CAAUwB,iBAAV,GAA8B,KAA9B;AACD,CAHD;AAKA;;;;;;;AAKA/B,WAAW,CAACoB,SAAZ,CAAsBwB,MAAtB,GAA+B,UAASC,WAAT,EAAsB;AACnD,OAAK3C,IAAL,GAAY2C,WAAZ;AACA,OAAKhC,WAAL;AACD,CAHD;AAKA;;;;;AAGAb,WAAW,CAACoB,SAAZ,CAAsBkB,KAAtB,GAA8B,YAAW;AACvC,OAAKpC,IAAL,GAAY,EAAZ;AACA,OAAKK,IAAL,CAAU+B,KAAV;AACD,CAHD;AAKA;;;;;;;;AAMAtC,WAAW,CAACoB,SAAZ,CAAsBiB,SAAtB,GAAkC,UAASf,KAAT,EAAgB;AAChDA,EAAAA,KAAK,GAAGA,KAAK,CAACwB,WAAN,EAAR;AACA,SAAOxB,KAAP;AACD,CAHD;AAKA;;;;;;;;;AAOAtB,WAAW,CAACoB,SAAZ,CAAsB2B,KAAtB,GAA8B,UAASC,SAAT,EAAoBxC,KAApB,EAA2B;AACvD,SAAOwC,SAAS,CAACC,OAAV,CAAkBzC,KAAlB,IAA2B,CAAC,CAAnC;AACD,CAFD;;AAIAR,WAAW,CAACoB,SAAZ,CAAsBE,KAAtB,GAA8B,UAASA,KAAT,EAAgB;AAC5C,OAAKb,QAAL,GAAgBa,KAAhB;AACA,OAAKrB,EAAL,CAAQqB,KAAR,GAAgB,KAAK4B,YAAL,CAAkB5B,KAAlB,CAAhB;;AAEA,MAAI6B,QAAQ,CAACC,WAAb,EAA0B;AACxB,QAAIxC,CAAC,GAAGuC,QAAQ,CAACC,WAAT,CAAqB,YAArB,CAAR;AACAxC,IAAAA,CAAC,CAACyC,SAAF,CAAY,QAAZ,EAAsB,IAAtB,EAA4B,KAA5B;AACA,SAAKpD,EAAL,CAAQqD,aAAR,CAAsB1C,CAAtB;AACD,GAJD,MAIO;AACL,SAAKX,EAAL,CAAQsD,SAAR,CAAkB,UAAlB;AACD;AACF,CAXD;;AAaAvD,WAAW,CAACoB,SAAZ,CAAsBoB,aAAtB,GAAsC,UAASgB,QAAT,EAAmB;AACvD,MAAIrD,OAAO,GAAG;AACZsD,IAAAA,GAAG,EAAE,UADO;AAEZC,IAAAA,IAAI,EAAE,WAFM;AAGZC,IAAAA,OAAO,EAAE,UAASC,CAAT,EAAY;AAAE,aAAO,KAAKV,YAAL,CAAkBU,CAAlB,CAAP;AAA8B,KAA5C,CAA6C7C,IAA7C,CAAkD,IAAlD;AAHG,GAAd;AAMA,MAAI8C,OAAO,GAAG,KAAK1D,OAAL,CAAaG,MAAb,GACZR,KAAK,CAACQ,MAAN,CAAa,KAAKE,KAAlB,EAAyB,KAAKN,IAA9B,EAAoCC,OAApC,CADY,GAEZ,KAAKD,IAAL,CAAU4D,GAAV,CAAc,UAASF,CAAT,EAAY;AACxB,QAAIG,UAAU,GAAG,KAAKb,YAAL,CAAkBU,CAAlB,CAAjB;AACA,QAAII,WAAW,GAAG,KAAK3B,SAAL,CAAe0B,UAAf,CAAlB;AACA,QAAIE,YAAY,GAAGD,WAAW,CAACE,WAAZ,CAAwB,KAAK1D,KAA7B,CAAnB;;AACA,WAAMyD,YAAY,GAAG,CAAC,CAAtB,EAAyB;AACvB,UAAIE,eAAe,GAAGF,YAAY,GAAG,KAAKzD,KAAL,CAAW+B,MAAhD;AACAwB,MAAAA,UAAU,GAAGA,UAAU,CAACK,KAAX,CAAiB,CAAjB,EAAoBH,YAApB,IAAoC,UAApC,GAAiDF,UAAU,CAACK,KAAX,CAAiBH,YAAjB,EAA+BE,eAA/B,CAAjD,GAAmG,WAAnG,GAAiHJ,UAAU,CAACK,KAAX,CAAiBD,eAAjB,CAA9H;AACAF,MAAAA,YAAY,GAAGD,WAAW,CAACI,KAAZ,CAAkB,CAAlB,EAAqBH,YAArB,EAAmCC,WAAnC,CAA+C,KAAK1D,KAApD,CAAf;AACD;;AACD,WAAO;AACLmB,MAAAA,QAAQ,EAAEiC,CADL;AAELS,MAAAA,MAAM,EAAEN;AAFH,KAAP;AAID,GAba,CAaZhD,IAbY,CAaP,IAbO,CAAd,CAFF;AAiBAyC,EAAAA,QAAQ,CAACK,OAAD,CAAR;AACD,CAzBD;AA2BA;;;;;;;;AAMA7D,WAAW,CAACoB,SAAZ,CAAsB8B,YAAtB,GAAqC,UAASoB,IAAT,EAAe;AAClD,SAAOA,IAAP;AACD,CAFD;;AAIAC,MAAM,CAACC,OAAP,GAAiBxE,WAAjB","sourcesContent":["'use strict';\r\n\r\nvar extend = require('xtend');\r\nvar fuzzy = require('fuzzy');\r\nvar List = require('./list');\r\n\r\nvar Suggestions = function(el, data, options) {\r\n  options = options || {};\r\n\r\n  this.options = extend({\r\n    minLength: 2,\r\n    limit: 5,\r\n    filter: true\r\n  }, options);\r\n\r\n  this.el = el;\r\n  this.data = data || [];\r\n  this.list = new List(this);\r\n\r\n  this.query = '';\r\n  this.selected = null;\r\n\r\n  this.list.draw();\r\n\r\n  this.el.addEventListener('keyup', function(e) {\r\n    this.handleKeyUp(e.keyCode);\r\n  }.bind(this), false);\r\n\r\n  this.el.addEventListener('keydown', function(e) {\r\n    this.handleKeyDown(e);\r\n  }.bind(this));\r\n\r\n  this.el.addEventListener('focus', function() {\r\n    this.handleFocus();\r\n  }.bind(this));\r\n\r\n  this.el.addEventListener('blur', function() {\r\n    this.handleBlur();\r\n  }.bind(this));\r\n\r\n  this.el.addEventListener('paste', function(e) {\r\n    this.handlePaste(e);\r\n  }.bind(this));\r\n\r\n  return this;\r\n};\r\n\r\nSuggestions.prototype.handleKeyUp = function(keyCode) {\r\n  // 40 - DOWN\r\n  // 38 - UP\r\n  // 27 - ESC\r\n  // 13 - ENTER\r\n  // 9 - TAB\r\n\r\n  if (keyCode === 40 ||\r\n      keyCode === 38 ||\r\n      keyCode === 27 ||\r\n      keyCode === 13 ||\r\n      keyCode === 9) return;\r\n\r\n  this.handleInputChange(this.el.value);\r\n};\r\n\r\nSuggestions.prototype.handleKeyDown = function(e) {\r\n  switch (e.keyCode) {\r\n    case 13: // ENTER\r\n    case 9:  // TAB\r\n      e.preventDefault();\r\n      if (!this.list.isEmpty()) {\r\n        this.value(this.list.items[this.list.active].original);\r\n        this.list.hide();\r\n      }\r\n    break;\r\n    case 27: // ESC\r\n      if (!this.list.isEmpty()) this.list.hide();\r\n    break;\r\n    case 38: // UP\r\n      this.list.previous();\r\n    break;\r\n    case 40: // DOWN\r\n      this.list.next();\r\n    break;\r\n  }\r\n};\r\n\r\nSuggestions.prototype.handleBlur = function() {\r\n  if (!this.list.selectingListItem) {\r\n    this.list.hide();\r\n  }\r\n};\r\n\r\nSuggestions.prototype.handlePaste = function(e) {\r\n  if (e.clipboardData) {\r\n    this.handleInputChange(e.clipboardData.getData('Text'));\r\n  } else {\r\n    var self = this;\r\n    setTimeout(function () {\r\n      self.handleInputChange(e.target.value);\r\n    }, 100);\r\n  }\r\n};\r\n\r\nSuggestions.prototype.handleInputChange = function(query) {\r\n  this.query = this.normalize(query);\r\n\r\n  this.list.clear();\r\n\r\n  if (this.query.length < this.options.minLength) {\r\n    this.list.draw();\r\n    return;\r\n  }\r\n\r\n  this.getCandidates(function(data) {\r\n    for (var i = 0; i < data.length; i++) {\r\n      this.list.add(data[i]);\r\n      if (i === (this.options.limit - 1)) break;\r\n    }\r\n    this.list.draw();\r\n  }.bind(this));\r\n};\r\n\r\nSuggestions.prototype.handleFocus = function() {\r\n  if (!this.list.isEmpty()) this.list.show();\r\n  this.list.selectingListItem = false;\r\n};\r\n\r\n/**\r\n * Update data previously passed\r\n *\r\n * @param {Array} revisedData\r\n */\r\nSuggestions.prototype.update = function(revisedData) {\r\n  this.data = revisedData;\r\n  this.handleKeyUp();\r\n};\r\n\r\n/**\r\n * Clears data\r\n */\r\nSuggestions.prototype.clear = function() {\r\n  this.data = [];\r\n  this.list.clear();\r\n};\r\n\r\n/**\r\n * Normalize the results list and input value for matching\r\n *\r\n * @param {String} value\r\n * @return {String}\r\n */\r\nSuggestions.prototype.normalize = function(value) {\r\n  value = value.toLowerCase();\r\n  return value;\r\n};\r\n\r\n/**\r\n * Evaluates whether an array item qualifies as a match with the current query\r\n *\r\n * @param {String} candidate a possible item from the array passed\r\n * @param {String} query the current query\r\n * @return {Boolean}\r\n */\r\nSuggestions.prototype.match = function(candidate, query) {\r\n  return candidate.indexOf(query) > -1;\r\n};\r\n\r\nSuggestions.prototype.value = function(value) {\r\n  this.selected = value;\r\n  this.el.value = this.getItemValue(value);\r\n\r\n  if (document.createEvent) {\r\n    var e = document.createEvent('HTMLEvents');\r\n    e.initEvent('change', true, false);\r\n    this.el.dispatchEvent(e);\r\n  } else {\r\n    this.el.fireEvent('onchange');\r\n  }\r\n};\r\n\r\nSuggestions.prototype.getCandidates = function(callback) {\r\n  var options = {\r\n    pre: '<strong>',\r\n    post: '</strong>',\r\n    extract: function(d) { return this.getItemValue(d); }.bind(this)\r\n  };\r\n\r\n  var results = this.options.filter ?\r\n    fuzzy.filter(this.query, this.data, options) :\r\n    this.data.map(function(d) {\r\n      var boldString = this.getItemValue(d);\r\n      var indexString = this.normalize(boldString);\r\n      var indexOfQuery = indexString.lastIndexOf(this.query);\r\n      while(indexOfQuery > -1) {\r\n        var endIndexOfQuery = indexOfQuery + this.query.length;\r\n        boldString = boldString.slice(0, indexOfQuery) + '<strong>' + boldString.slice(indexOfQuery, endIndexOfQuery) + '</strong>' + boldString.slice(endIndexOfQuery);\r\n        indexOfQuery = indexString.slice(0, indexOfQuery).lastIndexOf(this.query);\r\n      }\r\n      return {\r\n        original: d,\r\n        string: boldString\r\n      };\r\n    }.bind(this));\r\n\r\n  callback(results);\r\n};\r\n\r\n/**\r\n * For a given item in the data array, return what should be used as the candidate string\r\n *\r\n * @param {Object|String} item an item from the data array\r\n * @return {String} item\r\n */\r\nSuggestions.prototype.getItemValue = function(item) {\r\n  return item;\r\n};\r\n\r\nmodule.exports = Suggestions;\r\n"]},"metadata":{},"sourceType":"script"}