{"ast":null,"code":"/*\r\n * Copyright 2014-2016 the original author or authors\r\n * @license MIT, see LICENSE.txt for details\r\n *\r\n * @author Scott Andrews\r\n */\n'use strict';\n/*jshint latedef: nofunc */\n\nvar normalizeHeaderName = require('./normalizeHeaderName');\n\nfunction property(promise, name) {\n  return promise.then(function (value) {\n    return value && value[name];\n  }, function (value) {\n    return Promise.reject(value && value[name]);\n  });\n}\n/**\r\n * Obtain the response entity\r\n *\r\n * @returns {Promise} for the response entity\r\n */\n\n\nfunction entity() {\n  /*jshint validthis:true */\n  return property(this, 'entity');\n}\n/**\r\n * Obtain the response status\r\n *\r\n * @returns {Promise} for the response status\r\n */\n\n\nfunction status() {\n  /*jshint validthis:true */\n  return property(property(this, 'status'), 'code');\n}\n/**\r\n * Obtain the response headers map\r\n *\r\n * @returns {Promise} for the response headers map\r\n */\n\n\nfunction headers() {\n  /*jshint validthis:true */\n  return property(this, 'headers');\n}\n/**\r\n * Obtain a specific response header\r\n *\r\n * @param {String} headerName the header to retrieve\r\n * @returns {Promise} for the response header's value\r\n */\n\n\nfunction header(headerName) {\n  /*jshint validthis:true */\n  headerName = normalizeHeaderName(headerName);\n  return property(this.headers(), headerName);\n}\n/**\r\n * Follow a related resource\r\n *\r\n * The relationship to follow may be define as a plain string, an object\r\n * with the rel and params, or an array containing one or more entries\r\n * with the previous forms.\r\n *\r\n * Examples:\r\n *   response.follow('next')\r\n *\r\n *   response.follow({ rel: 'next', params: { pageSize: 100 } })\r\n *\r\n *   response.follow([\r\n *       { rel: 'items', params: { projection: 'noImages' } },\r\n *       'search',\r\n *       { rel: 'findByGalleryIsNull', params: { projection: 'noImages' } },\r\n *       'items'\r\n *   ])\r\n *\r\n * @param {String|Object|Array} rels one, or more, relationships to follow\r\n * @returns ResponsePromise<Response> related resource\r\n */\n\n\nfunction follow(rels) {\n  /*jshint validthis:true */\n  rels = [].concat(rels);\n  return make(rels.reduce(function (response, rel) {\n    return response.then(function (response) {\n      if (typeof rel === 'string') {\n        rel = {\n          rel: rel\n        };\n      }\n\n      if (typeof response.entity.clientFor !== 'function') {\n        throw new Error('Hypermedia response expected');\n      }\n\n      var client = response.entity.clientFor(rel.rel);\n      return client({\n        params: rel.params\n      });\n    });\n  }, this));\n}\n/**\r\n * Wrap a Promise as an ResponsePromise\r\n *\r\n * @param {Promise<Response>} promise the promise for an HTTP Response\r\n * @returns {ResponsePromise<Response>} wrapped promise for Response with additional helper methods\r\n */\n\n\nfunction make(promise) {\n  promise.status = status;\n  promise.headers = headers;\n  promise.header = header;\n  promise.entity = entity;\n  promise.follow = follow;\n  return promise;\n}\n\nfunction responsePromise(obj, callback, errback) {\n  return make(Promise.resolve(obj).then(callback, errback));\n}\n\nresponsePromise.make = make;\n\nresponsePromise.reject = function (val) {\n  return make(Promise.reject(val));\n};\n\nresponsePromise.promise = function (func) {\n  return make(new Promise(func));\n};\n\nmodule.exports = responsePromise;","map":{"version":3,"sources":["C:/Users/Fabricien/Documents/Projet/Touriste/client/node_modules/rest/util/responsePromise.js"],"names":["normalizeHeaderName","require","property","promise","name","then","value","Promise","reject","entity","status","headers","header","headerName","follow","rels","concat","make","reduce","response","rel","clientFor","Error","client","params","responsePromise","obj","callback","errback","resolve","val","func","module","exports"],"mappings":"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","sourcesContent":["/*\r\n * Copyright 2014-2016 the original author or authors\r\n * @license MIT, see LICENSE.txt for details\r\n *\r\n * @author Scott Andrews\r\n */\r\n\r\n'use strict';\r\n\r\n/*jshint latedef: nofunc */\r\n\r\nvar normalizeHeaderName = require('./normalizeHeaderName');\r\n\r\nfunction property(promise, name) {\r\n\treturn promise.then(\r\n\t\tfunction (value) {\r\n\t\t\treturn value && value[name];\r\n\t\t},\r\n\t\tfunction (value) {\r\n\t\t\treturn Promise.reject(value && value[name]);\r\n\t\t}\r\n\t);\r\n}\r\n\r\n/**\r\n * Obtain the response entity\r\n *\r\n * @returns {Promise} for the response entity\r\n */\r\nfunction entity() {\r\n\t/*jshint validthis:true */\r\n\treturn property(this, 'entity');\r\n}\r\n\r\n/**\r\n * Obtain the response status\r\n *\r\n * @returns {Promise} for the response status\r\n */\r\nfunction status() {\r\n\t/*jshint validthis:true */\r\n\treturn property(property(this, 'status'), 'code');\r\n}\r\n\r\n/**\r\n * Obtain the response headers map\r\n *\r\n * @returns {Promise} for the response headers map\r\n */\r\nfunction headers() {\r\n\t/*jshint validthis:true */\r\n\treturn property(this, 'headers');\r\n}\r\n\r\n/**\r\n * Obtain a specific response header\r\n *\r\n * @param {String} headerName the header to retrieve\r\n * @returns {Promise} for the response header's value\r\n */\r\nfunction header(headerName) {\r\n\t/*jshint validthis:true */\r\n\theaderName = normalizeHeaderName(headerName);\r\n\treturn property(this.headers(), headerName);\r\n}\r\n\r\n/**\r\n * Follow a related resource\r\n *\r\n * The relationship to follow may be define as a plain string, an object\r\n * with the rel and params, or an array containing one or more entries\r\n * with the previous forms.\r\n *\r\n * Examples:\r\n *   response.follow('next')\r\n *\r\n *   response.follow({ rel: 'next', params: { pageSize: 100 } })\r\n *\r\n *   response.follow([\r\n *       { rel: 'items', params: { projection: 'noImages' } },\r\n *       'search',\r\n *       { rel: 'findByGalleryIsNull', params: { projection: 'noImages' } },\r\n *       'items'\r\n *   ])\r\n *\r\n * @param {String|Object|Array} rels one, or more, relationships to follow\r\n * @returns ResponsePromise<Response> related resource\r\n */\r\nfunction follow(rels) {\r\n\t/*jshint validthis:true */\r\n\trels = [].concat(rels);\r\n\r\n\treturn make(rels.reduce(function (response, rel) {\r\n\t\treturn response.then(function (response) {\r\n\t\t\tif (typeof rel === 'string') {\r\n\t\t\t\trel = { rel: rel };\r\n\t\t\t}\r\n\t\t\tif (typeof response.entity.clientFor !== 'function') {\r\n\t\t\t\tthrow new Error('Hypermedia response expected');\r\n\t\t\t}\r\n\t\t\tvar client = response.entity.clientFor(rel.rel);\r\n\t\t\treturn client({ params: rel.params });\r\n\t\t});\r\n\t}, this));\r\n}\r\n\r\n/**\r\n * Wrap a Promise as an ResponsePromise\r\n *\r\n * @param {Promise<Response>} promise the promise for an HTTP Response\r\n * @returns {ResponsePromise<Response>} wrapped promise for Response with additional helper methods\r\n */\r\nfunction make(promise) {\r\n\tpromise.status = status;\r\n\tpromise.headers = headers;\r\n\tpromise.header = header;\r\n\tpromise.entity = entity;\r\n\tpromise.follow = follow;\r\n\treturn promise;\r\n}\r\n\r\nfunction responsePromise(obj, callback, errback) {\r\n\treturn make(Promise.resolve(obj).then(callback, errback));\r\n}\r\n\r\nresponsePromise.make = make;\r\nresponsePromise.reject = function (val) {\r\n\treturn make(Promise.reject(val));\r\n};\r\nresponsePromise.promise = function (func) {\r\n\treturn make(new Promise(func));\r\n};\r\n\r\nmodule.exports = responsePromise;\r\n"]},"metadata":{},"sourceType":"script"}