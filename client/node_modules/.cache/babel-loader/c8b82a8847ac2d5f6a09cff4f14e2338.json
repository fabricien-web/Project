{"ast":null,"code":"'use strict';\n\nvar invariant = require('../vendor/invariant');\n\nvar constants = require('./constants');\n\nvar client = require('./client');\n\nvar getUser = require('./get_user');\n/**\r\n * Services all have the same constructor pattern: you initialize them\r\n * with an access token and options, and they validate those arguments\r\n * in a predictable way. This is a constructor-generator that makes\r\n * it possible to require each service's API individually.\r\n *\r\n * @private\r\n * @param {string} name the name of the Mapbox API this class will access:\r\n * this is set to the name of the function so it will show up in tracebacks\r\n * @returns {Function} constructor function\r\n */\n\n\nfunction makeService(name) {\n  function service(accessToken, options) {\n    this.name = name;\n    invariant(typeof accessToken === 'string', 'accessToken required to instantiate Mapbox client');\n    var endpoint = constants.DEFAULT_ENDPOINT;\n\n    if (options !== undefined) {\n      invariant(typeof options === 'object', 'options must be an object');\n\n      if (options.endpoint) {\n        invariant(typeof options.endpoint === 'string', 'endpoint must be a string');\n        endpoint = options.endpoint;\n      }\n\n      if (options.account) {\n        invariant(typeof options.account === 'string', 'account must be a string');\n        this.owner = options.account;\n      }\n    }\n\n    this.client = client({\n      endpoint: endpoint,\n      accessToken: accessToken\n    });\n    this.accessToken = accessToken;\n    this.endpoint = endpoint;\n    this.owner = this.owner || getUser(accessToken);\n    invariant(!!this.owner, 'could not determine account from provided accessToken');\n  }\n\n  return service;\n}\n\nmodule.exports = makeService;","map":{"version":3,"sources":["C:/Users/Fabricien/Documents/Projet/fabTravel/client/node_modules/mapbox/lib/make_service.js"],"names":["invariant","require","constants","client","getUser","makeService","name","service","accessToken","options","endpoint","DEFAULT_ENDPOINT","undefined","account","owner","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,SAAS,GAAGC,OAAO,CAAC,qBAAD,CAAvB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,aAAD,CAAvB;;AACA,IAAIE,MAAM,GAAGF,OAAO,CAAC,UAAD,CAApB;;AACA,IAAIG,OAAO,GAAGH,OAAO,CAAC,YAAD,CAArB;AAEA;;;;;;;;;;;;;AAWA,SAASI,WAAT,CAAqBC,IAArB,EAA2B;AAEzB,WAASC,OAAT,CAAiBC,WAAjB,EAA8BC,OAA9B,EAAuC;AACrC,SAAKH,IAAL,GAAYA,IAAZ;AAEAN,IAAAA,SAAS,CAAC,OAAOQ,WAAP,KAAuB,QAAxB,EACP,mDADO,CAAT;AAGA,QAAIE,QAAQ,GAAGR,SAAS,CAACS,gBAAzB;;AAEA,QAAIF,OAAO,KAAKG,SAAhB,EAA2B;AACzBZ,MAAAA,SAAS,CAAC,OAAOS,OAAP,KAAmB,QAApB,EAA8B,2BAA9B,CAAT;;AACA,UAAIA,OAAO,CAACC,QAAZ,EAAsB;AACpBV,QAAAA,SAAS,CAAC,OAAOS,OAAO,CAACC,QAAf,KAA4B,QAA7B,EAAuC,2BAAvC,CAAT;AACAA,QAAAA,QAAQ,GAAGD,OAAO,CAACC,QAAnB;AACD;;AACD,UAAID,OAAO,CAACI,OAAZ,EAAqB;AACnBb,QAAAA,SAAS,CAAC,OAAOS,OAAO,CAACI,OAAf,KAA2B,QAA5B,EAAsC,0BAAtC,CAAT;AACA,aAAKC,KAAL,GAAaL,OAAO,CAACI,OAArB;AACD;AACF;;AAED,SAAKV,MAAL,GAAcA,MAAM,CAAC;AACnBO,MAAAA,QAAQ,EAAEA,QADS;AAEnBF,MAAAA,WAAW,EAAEA;AAFM,KAAD,CAApB;AAKA,SAAKA,WAAL,GAAmBA,WAAnB;AACA,SAAKE,QAAL,GAAgBA,QAAhB;AACA,SAAKI,KAAL,GAAa,KAAKA,KAAL,IAAcV,OAAO,CAACI,WAAD,CAAlC;AACAR,IAAAA,SAAS,CAAC,CAAC,CAAC,KAAKc,KAAR,EAAe,uDAAf,CAAT;AAED;;AAED,SAAOP,OAAP;AACD;;AAEDQ,MAAM,CAACC,OAAP,GAAiBX,WAAjB","sourcesContent":["'use strict';\r\n\r\nvar invariant = require('../vendor/invariant');\r\nvar constants = require('./constants');\r\nvar client = require('./client');\r\nvar getUser = require('./get_user');\r\n\r\n/**\r\n * Services all have the same constructor pattern: you initialize them\r\n * with an access token and options, and they validate those arguments\r\n * in a predictable way. This is a constructor-generator that makes\r\n * it possible to require each service's API individually.\r\n *\r\n * @private\r\n * @param {string} name the name of the Mapbox API this class will access:\r\n * this is set to the name of the function so it will show up in tracebacks\r\n * @returns {Function} constructor function\r\n */\r\nfunction makeService(name) {\r\n\r\n  function service(accessToken, options) {\r\n    this.name = name;\r\n\r\n    invariant(typeof accessToken === 'string',\r\n      'accessToken required to instantiate Mapbox client');\r\n\r\n    var endpoint = constants.DEFAULT_ENDPOINT;\r\n\r\n    if (options !== undefined) {\r\n      invariant(typeof options === 'object', 'options must be an object');\r\n      if (options.endpoint) {\r\n        invariant(typeof options.endpoint === 'string', 'endpoint must be a string');\r\n        endpoint = options.endpoint;\r\n      }\r\n      if (options.account) {\r\n        invariant(typeof options.account === 'string', 'account must be a string');\r\n        this.owner = options.account;\r\n      }\r\n    }\r\n\r\n    this.client = client({\r\n      endpoint: endpoint,\r\n      accessToken: accessToken\r\n    });\r\n\r\n    this.accessToken = accessToken;\r\n    this.endpoint = endpoint;\r\n    this.owner = this.owner || getUser(accessToken);\r\n    invariant(!!this.owner, 'could not determine account from provided accessToken');\r\n\r\n  }\r\n\r\n  return service;\r\n}\r\n\r\nmodule.exports = makeService;\r\n"]},"metadata":{},"sourceType":"script"}